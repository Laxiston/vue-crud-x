import{B as e,u as t,r as a,C as o,e as s,f as n,D as l,o as c,j as i,E as u,k as r,l as p,n as d,q as b,t as g,x as m,w,y as h,F as y,G as v,z as f,A}from"./index.a19c4582.js";import{d as P}from"./util.2f5ed4e1.js";let S,k;const C=e=>{const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),a=window.atob(t),o=new Uint8Array(a.length);for(let s=0;s<a.length;++s)o[s]=a.charCodeAt(s);return o};const I={name:"Dashboard",setup(r,p){console.log("provide-inject MyTheme",e("MyTheme"));const d=i(),b=t(),g=a(0),m=a(""),w=a(null);let h=10;const y=a(20),v=a(String(2)),f=o((()=>b.state.count)),A=o((()=>b.state.user)),I=a("bb,cc"),D=a(JSON.stringify([{key:"aa",text:"aa11"},{key:"bb",text:"bb22"},{key:"cc",text:"cc33"},{key:"dd",text:"dd44"},{key:"ee",text:"ee55"}])),N=a("aaa0"),T=P((async(e,t,a)=>{console.log("search",e.detail,t,a);const o=[];for(let s=0;s<e.detail.length;s++)o.push("aaa"+s);document.querySelector("mwc-autocomplete").setList(o)}),500);let x;s((async()=>{console.log("dashboard mounted!"),x=setInterval((()=>{console.log("timer fired",String(v.value)),h+=1,y.value+=1}),2e5)})),n((()=>{x&&clearInterval(x)})),l((()=>console.log("dash updated!"))),c((()=>console.log("dashboard unmounted!")));return{ms:I,msOptions:D,ac:N,doAc:()=>{console.log("ac",N.value)},setAc:()=>{const e=document.querySelector("mwc-autocomplete");e.value="edcba",e.hello()},autoComplete:T,nonReactiveData:h,reactiveData:y,count:g,msg:m,selected:v,titleRef:w,storeCount:f,storeUser:A,updateSelected:e=>v.value=e.target.value,testApi:async e=>{try{const{data:t}=await d.get("/api/"+e);console.log("testApi",t)}catch(t){console.log("testApi err",t)}},subPn:async()=>{console.log(u);try{let e;if("FCM"===u)e=await(async(e,t)=>{try{const a=await Notification.requestPermission();if("granted"!==a)return null;if(S||(S=firebase.initializeApp(window.CONFIG_FIREBASE_CLIENT)),k||(k=firebase.messaging(),k.useServiceWorker(e),k.usePublicVapidKey(window.CONFIG_VAPID_KEY),k.onTokenRefresh((async()=>{const e=await k.getToken();await t(e)})),k.onMessage((e=>{console.log("Message received. ",e);try{const{title:t,body:a}=JSON.parse(e.data.notification);console.log((new Date).toISOString(),t,a)}catch(t){console.log("GCM msg error",t.toString())}}))),"granted"===a)return await k.getToken()}catch(a){console.log("Error initialise firebase app",a.toString())}return null})(window.SW_REG,(async e=>{await d.post("/api/webpush/sub",{subscription:e})}));else if("Webpush"===u){const{data:t}=await d.get("/api/webpush/vapid-public-key");e=await(async e=>{const t=await navigator.serviceWorker.ready,a=C(e);let o=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:a});return o=JSON.stringify(o),console.log("subscription",o),o})(t.publicKey)}e&&await d.post("/api/webpush/sub",{subscription:e})}catch(e){console.log("subPn",e)}},unsubPn:async()=>{try{"Webpush"===u&&await(async()=>{const e=await navigator.serviceWorker.ready,t=await e.pushManager.getSubscription();t&&await t.unsubscribe()})(),await d.post("/api/webpush/unsub")}catch(e){console.log("unsubPn",e)}},testPn:async()=>{try{let e;console.log("testPn VITE_PWA_PN",u),"FCM"===u?e={title:"Hello",body:(new Date).toLocaleString()}:"Webpush"===u&&(e="Hello "+(new Date).toLocaleString()),console.log("testPn data",e),await d.post("/api/webpush/send/1",{mode:u,data:e})}catch(e){console.log("testPn",e)}}}}},D=f("data-v-f71a57bc");r("data-v-f71a57bc");const N={class:"container"},T=g("h1",null,"A Hello Vite + Vue 3!",-1),x={ref:"titleRef"},E=A(),M=g("mwc-list-item",{value:"0"},"Item 0",-1),R=g("mwc-list-item",{value:"1"},"Item 1",-1),_=g("mwc-list-item",{value:"2"},"Item 2",-1),O=A(" "),V=A(" "),W=A(" ");p();const q=D(((e,t,a,o,s,n)=>(d(),b("div",N,[T,g("p",x,"Edit ./App.vue to test hot module replacement (HMR).",512),g("p",null,[g("span",null,"Count is: "+m(o.count),1),g("button",{onClick:t[1]||(t[1]=e=>o.count++)},"increment")]),g("p",null,[g("button",{onClick:t[2]||(t[2]=e=>o.testApi("healthcheck"))},"Test API"),E,g("button",{onClick:t[3]||(t[3]=e=>o.testApi("health-auth"))},"Test API Auth")]),g("mwc-select",{label:"preselected",value:o.selected,onChange:t[4]||(t[4]=(...e)=>o.updateSelected&&o.updateSelected(...e))},[M,R,_],40,["value"]),g("p",null,"Non-Reactive Data: "+m(o.nonReactiveData),1),g("p",null,"Reactive Data: "+m(o.reactiveData),1),g("p",null,"Vuex Store "+m(o.storeCount)+" - "+m(o.storeUser),1),w(g("mwc-autocomplete",{required:"",label:"ac-test","onUpdate:modelValue":t[5]||(t[5]=e=>o.ac=e),onSearch:t[6]||(t[6]=e=>o.autoComplete(e,"my-col","add"))},null,544),[[h,o.ac]]),g("p",null,[g("button",{onClick:t[7]||(t[7]=(...e)=>o.doAc&&o.doAc(...e))},"see ac"),O,g("button",{onClick:t[8]||(t[8]=(...e)=>o.setAc&&o.setAc(...e))},"set ac")]),w(g("mwc-multiselect",{required:"",label:"ms-test","onUpdate:modelValue":t[9]||(t[9]=e=>o.ms=e),options:o.msOptions},null,8,["options"]),[[h,o.ms]]),g("p",null,"Axios GET "+m(o.msg),1),g("p",null,[g("button",{onClick:t[10]||(t[10]=(...e)=>o.subPn&&o.subPn(...e))},"Sub PN"),V,g("button",{onClick:t[11]||(t[11]=(...e)=>o.unsubPn&&o.unsubPn(...e))},"Unsub PN"),W,g("button",{onClick:t[12]||(t[12]=(...e)=>o.testPn&&o.testPn(...e))},"Test PN")]),g("ul",null,[(d(),b(y,null,v(50,(e=>g("li",{key:e},m(e),1))),64))])]))));I.render=q,I.__scopeId="data-v-f71a57bc";export default I;
